"use client";
import { useEffect, useState } from "react";
import Link from "next/link";
import { MdOutlineShoppingCart } from "react-icons/md";
import { FaRegCircleUser } from "react-icons/fa6";
import { FiMenu } from "react-icons/fi";
import { useUIStore } from "@/store/ui/ui-store";
import { IoSearchSharp } from "react-icons/io5";
import { useCartUIStore } from "@/store/ui/ui-cart-store";

const links = [
  { id: 1, href: "/shop", nombre: "TIENDA" },
  { id: 2, href: "/collections", nombre: "COLECCIONES" },
  { id: 3, href: "/about", nombre: "NOSOTROS" },
];

export default function TopMenu() {
  const [isFixed, setIsFixed] = useState(false);
  const closeMenu = useUIStore((state) => state.openSideMenu);
  const toggleCartSideMenu = useCartUIStore(
    (state) => state.toggleCartSideMenu
  );

  useEffect(() => {
    const handleScroll = () => {
      setIsFixed(window.scrollY > 16);
    };

    window.addEventListener("scroll", handleScroll);
    return () => window.removeEventListener("scroll", handleScroll);
  }, []);

  return (
    <div
      className={`w-full  fixed text-[white] bg-primario/70  z-20 md:transition-all md:duration-500 md:ease-in-out ${
        isFixed
          ? "fixed top-0 backdrop-blur-lg  translate-y-0 md:py-6 md:h-[7.5vh] p-2 landscape:py-2 landscape:h-[10vh] lg:py-6"
          : "relative backdrop-blur-xs p-1 md:h-50px  md:py-0 bg-primario/80 lg:p-2 landscape:h-[7vh] landscape:p-0"
      }`}
    >
      <nav className="font-inter  px-4 py-3 flex justify-between items-center ">
        <button onClick={closeMenu} className="lg:hidden cursor-pointer">
          <FiMenu className="text-white text-2xl" />
        </button>

        <div className="hidden lg:flex gap-8 ">
          {links.map((link) => (
            <Link
              className="relative inline-block text-[white] before:content-[''] before:absolute before:bottom-0 before:left-1/2 before:-translate-x-1/2 before:w-0 before:h-[0.5px] before:bg-[white] before:transition-all before:duration-300 hover:before:w-full"
              key={link.id}
              href={link.href}
            >
              {link.nombre}
            </Link>
          ))}
        </div>

        <div>
          <Link href={"/"}>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              className="w-[130px] md:w-[190px] lg:w-[200px] "
              viewBox="0 0 193 30"
              fill="none"
            >
              <g clipPath="url(#clip0_944_1021)">
                <path
                  d="M165.468 0.8396H171.37C171.79 0.839598 172.193 1.0062 172.49 1.30285C172.788 1.5995 172.955 2.00197 172.956 2.42198V21.0971C172.956 21.2224 173.006 21.3424 173.094 21.431C173.183 21.5195 173.303 21.5693 173.428 21.5693H191.421C191.841 21.5703 192.244 21.7377 192.541 22.0349C192.839 22.3321 193.006 22.735 193.007 23.1554V27.5816C193.006 28.002 192.839 28.4049 192.541 28.7021C192.244 28.9993 191.841 29.1667 191.421 29.1677H165.476C165.267 29.1677 165.061 29.1266 164.868 29.0466C164.675 28.9667 164.5 28.8495 164.353 28.7018C164.206 28.5542 164.089 28.3789 164.009 28.186C163.93 27.9932 163.889 27.7865 163.89 27.5779V2.42198C163.89 2.00294 164.056 1.60101 164.352 1.30436C164.648 1.00771 165.049 0.840576 165.468 0.8396Z"
                  fill="white"
                />
                <path
                  d="M32.0315 19.3488V27.5779C32.0315 27.998 32.198 28.4008 32.4947 28.6982C32.7913 28.9955 33.1938 29.163 33.6138 29.164H39.5155C39.9359 29.163 40.3388 28.9956 40.636 28.6984C40.9332 28.4012 41.1006 27.9983 41.1016 27.5779V2.42198C41.1006 2.00197 40.9331 1.5995 40.6358 1.30285C40.3384 1.0062 39.9356 0.839598 39.5155 0.8396H33.6138C33.1942 0.8396 32.7917 1.00632 32.4949 1.30308C32.1982 1.59983 32.0315 2.00231 32.0315 2.42198V10.9057C32.0311 10.9951 32.0071 11.0829 31.9617 11.16C31.9163 11.2372 31.8513 11.3008 31.7733 11.3446L14.26 21.1119C14.0131 21.2497 13.8073 21.4508 13.664 21.6946C13.5207 21.9384 13.4451 22.216 13.4448 22.4988V26.4714C13.445 26.7479 13.5174 27.0196 13.655 27.2595C13.7926 27.4994 13.9905 27.6992 14.2291 27.839C14.4677 27.9788 14.7387 28.0538 15.0152 28.0565C15.2917 28.0593 15.5642 27.9896 15.8055 27.8546L31.5483 19.0758C31.5969 19.0485 31.6517 19.0342 31.7075 19.0343C31.7633 19.0344 31.8181 19.0489 31.8667 19.0763C31.9152 19.1037 31.9559 19.1432 31.9848 19.191C32.0136 19.2387 32.0297 19.293 32.0315 19.3488Z"
                  fill="white"
                />
                <path
                  d="M9.06272 10.6807V2.42199C9.06273 2.21387 9.02167 2.0078 8.94192 1.81557C8.86217 1.62335 8.74527 1.44876 8.59794 1.30178C8.45061 1.15479 8.27575 1.0383 8.08333 0.958991C7.89092 0.879686 7.68476 0.839119 7.47665 0.839604H1.5934C1.17338 0.839603 0.770508 1.00621 0.473166 1.30286C0.175825 1.59951 0.008301 2.00197 0.00732422 2.42199V27.5779C0.00829839 27.9983 0.175705 28.4012 0.472941 28.6984C0.770178 28.9956 1.17304 29.163 1.5934 29.164H7.49509C7.91574 29.164 8.31918 28.9969 8.61663 28.6995C8.91407 28.402 9.08116 27.9986 9.08116 27.5779V19.0943C9.08152 19.0019 9.10627 18.9114 9.15291 18.8317C9.19955 18.752 9.26643 18.6861 9.34675 18.6406L26.8526 8.87696C27.0988 8.7396 27.3039 8.53897 27.4466 8.29578C27.5892 8.0526 27.6643 7.7757 27.6641 7.49375V3.53963C27.6642 3.26331 27.5922 2.99173 27.4551 2.75183C27.318 2.51192 27.1205 2.312 26.8824 2.17187C26.6442 2.03173 26.3736 1.95626 26.0973 1.9529C25.821 1.94954 25.5486 2.01842 25.3071 2.15273L9.53854 10.9499C9.49114 10.98 9.43647 10.9967 9.38034 10.9981C9.32421 10.9995 9.26873 10.9857 9.21987 10.958C9.171 10.9304 9.13057 10.8899 9.10289 10.8411C9.07521 10.7922 9.06133 10.7368 9.06272 10.6807Z"
                  fill="white"
                />
                <path
                  d="M71.9599 0.839604H49.5851C49.1651 0.839603 48.7622 1.00621 48.4649 1.30286C48.1675 1.59951 48 2.00197 47.999 2.42199V25.2173C48.0038 25.6326 48.1706 26.0296 48.4638 26.3238L50.8208 28.6808C51.1143 28.975 51.5118 29.142 51.9273 29.1456H79.4218C79.8425 29.1456 80.2459 28.9785 80.5434 28.681C80.8408 28.3836 81.0079 27.9802 81.0079 27.5595V23.6496C81.0079 23.229 80.8408 22.8256 80.5434 22.5281C80.2459 22.2307 79.8425 22.0635 79.4218 22.0635H57.5782C57.4419 22.0636 57.3111 22.0097 57.2144 21.9136C57.1176 21.8176 57.0628 21.6872 57.0618 21.5508V18.2717C57.0628 18.1354 57.1176 18.005 57.2144 17.9089C57.3111 17.8129 57.4419 17.759 57.5782 17.759H79.4218C79.6303 17.7595 79.8367 17.7188 80.0294 17.6393C80.222 17.5597 80.3971 17.4429 80.5445 17.2955C80.6918 17.1482 80.8086 16.9731 80.8882 16.7805C80.9677 16.5878 81.0084 16.3814 81.0079 16.1729V2.42199C81.0079 2.21387 80.9669 2.0078 80.8871 1.81557C80.8074 1.62335 80.6905 1.44876 80.5431 1.30178C80.3958 1.15479 80.2209 1.0383 80.0285 0.958991C79.8361 0.879686 79.6299 0.839119 79.4218 0.839604H71.9599ZM71.4656 11.8831H57.5561C57.425 11.8831 57.2993 11.8311 57.2066 11.7384C57.1139 11.6457 57.0618 11.52 57.0618 11.3889V8.39745C57.0618 8.33254 57.0746 8.26826 57.0994 8.2083C57.1243 8.14833 57.1607 8.09385 57.2066 8.04796C57.2525 8.00206 57.307 7.96566 57.3669 7.94082C57.4269 7.91598 57.4912 7.90318 57.5561 7.90318H71.4656C71.5305 7.90318 71.5948 7.91598 71.6548 7.94082C71.7147 7.96566 71.7692 8.00206 71.8151 8.04796C71.861 8.09385 71.8974 8.14833 71.9222 8.2083C71.9471 8.26826 71.9599 8.33254 71.9599 8.39745V11.3741C71.9619 11.4403 71.9505 11.5061 71.9266 11.5678C71.9026 11.6295 71.8665 11.6857 71.8204 11.7332C71.7743 11.7807 71.7192 11.8184 71.6582 11.8441C71.5973 11.8699 71.5318 11.8832 71.4656 11.8831Z"
                  fill="white"
                />
                <path
                  d="M147.915 0.839604H125.529C125.321 0.839119 125.115 0.879686 124.923 0.958991C124.73 1.0383 124.555 1.15479 124.408 1.30178C124.261 1.44876 124.144 1.62335 124.064 1.81557C123.984 2.0078 123.943 2.21387 123.943 2.42199V6.33187C123.943 6.54029 123.984 6.74676 124.063 6.93941C124.143 7.13206 124.259 7.30709 124.407 7.45447C124.554 7.60184 124.729 7.71866 124.922 7.7982C125.115 7.87773 125.321 7.91843 125.529 7.91794H147.465C147.523 7.91794 147.58 7.9293 147.633 7.95135C147.687 7.97341 147.735 8.00573 147.776 8.04649C147.816 8.08725 147.849 8.13566 147.871 8.18891C147.893 8.24217 147.904 8.29924 147.904 8.35688V11.4442C147.904 11.5018 147.893 11.5589 147.871 11.6122C147.849 11.6654 147.816 11.7138 147.776 11.7546C147.735 11.7953 147.687 11.8277 147.633 11.8497C147.58 11.8718 147.523 11.8831 147.465 11.8831H125.529C125.109 11.8831 124.705 12.0502 124.408 12.3477C124.11 12.6451 123.943 13.0486 123.943 13.4692V25.2173C123.946 25.633 124.113 26.0308 124.408 26.3238L126.765 28.6808C127.058 28.9757 127.456 29.1428 127.872 29.1456H155.407C155.827 29.1446 156.23 28.9772 156.527 28.68C156.824 28.3827 156.992 27.9799 156.993 27.5595V2.42199C156.992 2.00197 156.824 1.59951 156.527 1.30286C156.23 1.00621 155.827 0.839603 155.407 0.839604H147.915ZM147.432 22.0783H133.5C133.372 22.0783 133.249 22.0274 133.159 21.9368C133.068 21.8462 133.017 21.7233 133.017 21.5951V18.2754C133.017 18.1473 133.068 18.0244 133.159 17.9337C133.249 17.8431 133.372 17.7922 133.5 17.7922H147.432C147.56 17.7922 147.683 17.8431 147.774 17.9337C147.864 18.0244 147.915 18.1473 147.915 18.2754V21.5951C147.915 21.7233 147.864 21.8462 147.774 21.9368C147.683 22.0274 147.56 22.0783 147.432 22.0783Z"
                  fill="white"
                />
                <path
                  d="M107.983 2.42199V21.0529C107.983 21.1898 107.928 21.3212 107.831 21.418C107.735 21.5149 107.603 21.5693 107.466 21.5693H97.5072C97.3703 21.5693 97.2389 21.5149 97.1421 21.418C97.0452 21.3212 96.9908 21.1898 96.9908 21.0529V2.42199C96.9908 2.21387 96.9498 2.0078 96.87 1.81557C96.7903 1.62335 96.6734 1.44876 96.526 1.30178C96.3787 1.15479 96.2039 1.0383 96.0114 0.958991C95.819 0.879686 95.6129 0.839119 95.4048 0.839604H89.5031C89.295 0.839119 89.0888 0.879686 88.8964 0.958991C88.704 1.0383 88.5291 1.15479 88.3818 1.30178C88.2344 1.44876 88.1175 1.62335 88.0378 1.81557C87.958 2.0078 87.917 2.21387 87.917 2.42199V20.9385C87.9173 21.1754 87.9705 21.4093 88.0726 21.623C88.1746 21.8368 88.3231 22.0251 88.5072 22.1742L96.7216 28.8136C97.0042 29.0399 97.3554 29.1635 97.7175 29.164H107.23C107.592 29.1635 107.944 29.0399 108.226 28.8136L117.046 21.7021V2.42199C117.046 2.21387 117.004 2.0078 116.925 1.81557C116.845 1.62335 116.728 1.44876 116.581 1.30178C116.433 1.15479 116.259 1.0383 116.066 0.958991C115.874 0.879686 115.668 0.839119 115.459 0.839604H109.558C109.14 0.84252 108.74 1.01039 108.445 1.30673C108.15 1.60306 107.984 2.00388 107.983 2.42199Z"
                  fill="white"
                />
              </g>
              <defs>
                <clipPath id="clip0_944_1021">
                  <rect
                    width="193"
                    height="28.3207"
                    fill="white"
                    transform="translate(0 0.8396)"
                  />
                </clipPath>
              </defs>
            </svg>
          </Link>
        </div>

        <div className="flex  items-center gap-6">
          <Link href={"/"}>
            <IoSearchSharp className="text-2xl" />
          </Link>
          <Link className="hidden sm:block" href={"/"}>
            <FaRegCircleUser className="text-2xl" />
          </Link>

          <button onClick={toggleCartSideMenu} className="relative">
            <span className="absolute top-0 right-0 translate-x-1/2 -translate-y-1/2 flex h-5 w-5 items-center justify-center rounded-full bg-[#ff8800b9] text-[11px] text-white font-bold">
              1
            </span>

            <MdOutlineShoppingCart className="text-2xl cursor-pointer" />
          </button>
        </div>
      </nav>
    </div>
  );
}
